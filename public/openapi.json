{
  "openapi": "3.0.0",
  "info": {
    "title": "OpenSenseMap API",
    "version": "1.0.0",
    "description": "\n# OpenSenseMap API Documentation\n\nUse the links below or the sidebar to navigate.\n\n- Public API\n- Integration API\n        "
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://opensensemap.org/api",
      "description": "Production server"
    }
  ],
  "components": {
    "schemas": {
      "SenseBoxId": {
        "type": "string",
        "pattern": "^[a-f0-9]{24}$",
        "description": "Unique identifier for stations and sensors (24 characters, digits and a-f only)",
        "example": "5a8d1c25bc2d41001927a265"
      },
      "Timestamp": {
        "type": "string",
        "format": "date-time",
        "description": "RFC 3339 timestamp in UTC timezone",
        "examples": [
          "2018-02-01T23:18:02Z",
          "2018-02-01T23:18:02.412Z"
        ]
      },
      "Box": {
        "type": "object",
        "description": "Box/Device object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Unique box identifier",
            "example": "clx1234567890abcdef"
          },
          "name": {
            "type": "string",
            "description": "Box name",
            "example": "My Weather Station"
          },
          "description": {
            "type": "string",
            "description": "Box description",
            "example": "A weather monitoring station"
          },
          "image": {
            "type": "string",
            "format": "uri",
            "description": "Box image URL",
            "example": "https://example.com/image.jpg"
          },
          "link": {
            "type": "string",
            "format": "uri",
            "description": "Box website link",
            "example": "https://example.com"
          },
          "grouptag": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Box group tags",
            "example": [
              "weather",
              "outdoor"
            ]
          },
          "exposure": {
            "type": "string",
            "enum": [
              "indoor",
              "outdoor",
              "mobile",
              "unknown"
            ],
            "description": "Box exposure type",
            "example": "outdoor"
          },
          "model": {
            "type": "string",
            "enum": [
              "homeV2Lora",
              "homeV2Ethernet",
              "homeV2Wifi",
              "senseBox:Edu",
              "luftdaten.info",
              "Custom"
            ],
            "description": "Box model",
            "example": "homeV2Wifi"
          },
          "latitude": {
            "type": "number",
            "description": "Box latitude",
            "example": 52.520008
          },
          "longitude": {
            "type": "number",
            "description": "Box longitude",
            "example": 13.404954
          },
          "useAuth": {
            "type": "boolean",
            "description": "Whether box requires authentication",
            "example": true
          },
          "public": {
            "type": "boolean",
            "description": "Whether box is public",
            "example": false
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "old"
            ],
            "description": "Box status",
            "example": "inactive"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Box creation timestamp",
            "example": "2024-01-15T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Box last update timestamp",
            "example": "2024-01-15T10:30:00Z"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Box expiration date",
            "example": "2024-12-31T23:59:59Z"
          },
          "userId": {
            "type": "string",
            "description": "Owner user ID",
            "example": "user_123456"
          },
          "sensorWikiModel": {
            "type": "string",
            "nullable": true,
            "description": "Sensor Wiki model identifier",
            "example": "homeV2Wifi"
          },
          "currentLocation": {
            "type": "object",
            "description": "Current location as GeoJSON Point",
            "properties": {
              "type": {
                "type": "string",
                "example": "Point"
              },
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "number"
                },
                "example": [
                  13.404954,
                  52.520008
                ]
              },
              "timestamp": {
                "type": "string",
                "format": "date-time",
                "example": "2023-01-01T00:00:00.000Z"
              }
            }
          },
          "lastMeasurementAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last measurement timestamp",
            "example": "2023-01-01T00:00:00.000Z"
          },
          "loc": {
            "type": "array",
            "description": "Location history as GeoJSON features",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "Feature"
                },
                "geometry": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "example": "Point"
                    },
                    "coordinates": {
                      "type": "array",
                      "items": {
                        "type": "number"
                      },
                      "example": [
                        13.404954,
                        52.520008
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2023-01-01T00:00:00.000Z"
                    }
                  }
                }
              }
            }
          },
          "integrations": {
            "type": "object",
            "description": "Box integrations",
            "properties": {
              "mqtt": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean",
                    "example": false
                  }
                }
              }
            }
          },
          "sensors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "_id": {
                  "type": "string",
                  "description": "Sensor ID",
                  "example": "sensor123"
                },
                "title": {
                  "type": "string",
                  "description": "Sensor title",
                  "example": "Temperature"
                },
                "unit": {
                  "type": "string",
                  "description": "Sensor unit",
                  "example": "°C"
                },
                "sensorType": {
                  "type": "string",
                  "description": "Sensor type",
                  "example": "HDC1080"
                },
                "lastMeasurement": {
                  "type": "object",
                  "description": "Last measurement data",
                  "properties": {
                    "createdAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2023-01-01T00:00:00.000Z"
                    },
                    "value": {
                      "type": "string",
                      "example": "25.13"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "Device": {
        "type": "object",
        "required": [
          "id",
          "latitude",
          "longitude"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique device identifier",
            "example": "device-123"
          },
          "name": {
            "type": "string",
            "description": "Device name",
            "example": "Temperature Sensor A1"
          },
          "latitude": {
            "type": "number",
            "format": "float",
            "description": "Device latitude coordinate",
            "example": 52.52
          },
          "longitude": {
            "type": "number",
            "format": "float",
            "description": "Device longitude coordinate",
            "example": 13.405
          },
          "phenomenon": {
            "type": "string",
            "description": "Type of phenomenon measured",
            "example": "temperature"
          },
          "grouptag": {
            "type": "string",
            "description": "Group tag for device categorization",
            "example": "outdoor-sensors"
          },
          "exposure": {
            "type": "string",
            "description": "Device exposure type",
            "example": "outdoor"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Device creation timestamp",
            "example": "2023-05-15T10:00:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Device last update timestamp",
            "example": "2023-05-15T12:00:00Z"
          }
        }
      },
      "GeoJSONFeatureCollection": {
        "type": "object",
        "required": [
          "type",
          "features"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "FeatureCollection"
            ],
            "example": "FeatureCollection"
          },
          "features": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GeoJSONFeature"
            }
          }
        }
      },
      "GeoJSONFeature": {
        "type": "object",
        "required": [
          "type",
          "geometry",
          "properties"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Feature"
            ],
            "example": "Feature"
          },
          "geometry": {
            "$ref": "#/components/schemas/GeoJSONPoint"
          },
          "properties": {
            "$ref": "#/components/schemas/Device"
          }
        }
      },
      "GeoJSONPoint": {
        "type": "object",
        "required": [
          "type",
          "coordinates"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Point"
            ],
            "example": "Point"
          },
          "coordinates": {
            "type": "array",
            "items": {
              "type": "number"
            },
            "minItems": 2,
            "maxItems": 2,
            "description": "Longitude and latitude coordinates",
            "example": [
              13.405,
              52.52
            ]
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message",
            "example": "Failed to fetch devices"
          }
        }
      },
      "Sensor": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the sensor",
            "example": "sensor-1"
          },
          "name": {
            "type": "string",
            "description": "Human-readable name of the sensor",
            "example": "Temperature Sensor"
          },
          "type": {
            "type": "string",
            "description": "Type of sensor",
            "example": "temperature"
          }
        },
        "required": [
          "id",
          "name"
        ]
      },
      "Measurement": {
        "type": "object",
        "required": [
          "sensorId",
          "time",
          "value"
        ],
        "properties": {
          "sensorId": {
            "type": "string",
            "description": "Unique identifier for the sensor",
            "example": "sensor-123"
          },
          "time": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the measurement",
            "example": "2023-05-15T10:00:00Z"
          },
          "value": {
            "type": "number",
            "format": "float",
            "description": "Measured value",
            "example": 25.4
          }
        }
      },
      "User": {
        "type": "object",
        "description": "User information object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique user identifier",
            "example": "user_123456"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email address",
            "example": "john.doe@example.com"
          },
          "name": {
            "type": "string",
            "description": "User's display name",
            "example": "John Doe"
          },
          "language": {
            "type": "string",
            "description": "User's preferred language",
            "example": "en_US",
            "enum": [
              "de_DE",
              "en_US"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Account creation timestamp",
            "example": "2025-06-18T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last account update timestamp",
            "example": "2025-06-18T10:30:00Z"
          },
          "username": {
            "type": "string",
            "description": "User's chosen username",
            "example": "john_doe"
          }
        },
        "required": [
          "id",
          "username",
          "email",
          "language"
        ]
      },
      "ForbiddenError": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "example": "Forbidden"
          },
          "message": {
            "type": "string",
            "example": "Invalid JWT authorization. Please sign in to obtain new JWT."
          }
        }
      },
      "InternalServerError": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "example": "Internal Server Error"
          },
          "message": {
            "type": "string",
            "example": "The server was unable to complete your request. Please try again later."
          }
        }
      },
      "IntegrationConfig": {
        "type": "object",
        "description": "Integration configuration (schema varies by integration type)",
        "additionalProperties": true,
        "example": {
          "id": "intg_123",
          "deviceId": "cm65qexample123",
          "enabled": true,
          "url": "mqtt://broker.example.com",
          "topic": "sensors/data",
          "messageFormat": "json"
        }
      },
      "JsonSchema": {
        "type": "object",
        "description": "JSON Schema (draft-07) for dynamic form generation",
        "properties": {
          "schema": {
            "type": "object",
            "description": "JSON Schema definition"
          },
          "uiSchema": {
            "type": "object",
            "description": "React JSON Schema Form UI Schema"
          }
        },
        "required": [
          "schema"
        ]
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string"
          },
          "details": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "parameters": {
      "SenseBoxIdParam": {
        "name": "id",
        "in": "path",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/SenseBoxId"
        },
        "description": "SenseBox ID parameter"
      },
      "TimestampParam": {
        "name": "timestamp",
        "in": "query",
        "schema": {
          "$ref": "#/components/schemas/Timestamp"
        },
        "description": "Timestamp parameter in RFC 3339 format (UTC)"
      },
      "DeviceId": {
        "name": "deviceId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        },
        "description": "OpenSenseMap device ID",
        "example": "cm65qexample123"
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad Request - Invalid parameters or payload",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Invalid request parameters"
                }
              }
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Integration not found"
            }
          }
        }
      },
      "ValidationError": {
        "description": "Validation failed",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Validation failed",
              "details": [
                "url is required and must be a string",
                "topic is required and must be a string"
              ]
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized - invalid or missing service key",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Unauthorized"
            }
          }
        }
      },
      "InternalError": {
        "description": "Internal server error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Internal server error"
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token obtained from sign-in endpoint"
      },
      "ServiceKey": {
        "type": "apiKey",
        "in": "header",
        "name": "x-service-key",
        "description": "Service authentication key configured in OpenSenseMap"
      }
    }
  },
  "paths": {
    "/boxes/{deviceId}/data/{sensorId}": {
      "get": {
        "tags": [
          "Public · Sensors"
        ],
        "summary": "Get up to 10000 measurements from a sensor for a specific time frame",
        "description": "Get up to 10000 measurements from a sensor for a specific time frame, parameters `from-date` and `to-date` are optional. If not set, the last 48 hours are used. The maximum time frame is 1 month. If `download=true` `Content-disposition` headers will be set. Allows for JSON or CSV format.",
        "parameters": [
          {
            "in": "path",
            "name": "deviceId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "the ID of the senseBox you are referring to"
          },
          {
            "in": "path",
            "name": "sensorId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "the ID of the sensor you are referring to"
          },
          {
            "in": "query",
            "name": "outliers",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "replace",
                "mark"
              ]
            },
            "description": "Specifying this parameter enables outlier calculation which adds a new field called `isOutlier` to the data. Possible values are \"mark\" and \"replace\"."
          },
          {
            "in": "query",
            "name": "outlier-window",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 15
            },
            "description": "Size of moving window used as base to calculate the outliers."
          },
          {
            "in": "query",
            "name": "from-date",
            "required": false,
            "schema": {
              "type": "string",
              "description": "RFC3339Date",
              "format": "date-time"
            },
            "description": "Beginning date of measurement data (default: 48 hours ago from now)"
          },
          {
            "in": "query",
            "name": "to-date",
            "required": false,
            "schema": {
              "type": "string",
              "descrption": "TFC3339Date",
              "format": "date-time"
            },
            "description": "End date of measurement data (default: now)"
          },
          {
            "in": "query",
            "name": "format",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "json",
                "csv"
              ],
              "default": "json"
            },
            "description": "Can be 'json' (default) or 'csv' (default: json)"
          },
          {
            "in": "query",
            "name": "download",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "if specified, the api will set the `content-disposition` header thus forcing browsers to download instead of displaying. Is always true for format csv."
          },
          {
            "in": "query",
            "name": "delimiter",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "comma",
                "semicolon"
              ],
              "default": "comma"
            },
            "description": "Only for csv: the delimiter for csv. Possible values: `semicolon`, `comma`. Per default a comma is used. Alternatively you can use separator as parameter name."
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "example": "[{\"sensor_id\":\"6649b23072c4c40007105953\",\"time\":\"2025-11-06 23:59:57.189+00\",\"value\":4.78,\"location_id\":\"5752066\"},{\"sensor_id\":\"6649b23072c4c40007105953\",\"time\":\"2025-11-06 23:57:06.03+00\",\"value\":4.13,\"location_id\":\"5752066\"}]"
                }
              },
              "text/csv": {
                "example": "createdAt,value 2023-09-29T08:06:13.254Z,6.38 2023-09-29T08:06:12.312Z,6.38 2023-09-29T08:06:11.513Z,6.38 2023-09-29T08:06:10.380Z,6.38 2023-09-29T08:06:09.569Z,6.38 2023-09-29T08:06:05.967Z,6.38"
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/boxes/{deviceId}/locations": {
      "get": {
        "tags": [
          "Public · Boxes"
        ],
        "summary": "Get locations of a senseBox",
        "description": "Get all locations of the specified senseBox ordered by date as an array of GeoJSON Points. If `format=geojson`, a GeoJSON linestring will be returned, with `properties.timestamps` being an array with the timestamp for each coordinate.",
        "parameters": [
          {
            "in": "path",
            "name": "deviceId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "the ID of the senseBox you are referring to"
          },
          {
            "in": "query",
            "name": "from-date",
            "required": false,
            "schema": {
              "type": "string",
              "description": "RFC3339Date",
              "format": "date-time"
            },
            "description": "Beginning date of measurement data (default: 48 hours ago from now)"
          },
          {
            "in": "query",
            "name": "to-date",
            "required": false,
            "schema": {
              "type": "string",
              "descrption": "TFC3339Date",
              "format": "date-time"
            },
            "description": "End date of measurement data (default: now)"
          },
          {
            "in": "query",
            "name": "format",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "json",
                "geojson"
              ],
              "default": "json"
            },
            "description": "Can be 'json' (default) or 'geojson' (default: json)"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "example": "[{ \"coordinates\": [7.68123, 51.9123], \"type\": \"Point\", \"timestamp\": \"2017-07-27T12:00.000Z\"},{ \"coordinates\": [7.68223, 51.9433, 66.6], \"type\": \"Point\", \"timestamp\": \"2017-07-27T12:01.000Z\"},{ \"coordinates\": [7.68323, 51.9423], \"type\": \"Point\", \"timestamp\": \"2017-07-27T12:02.000Z\"}]"
                }
              },
              "application/geojson": {
                "example": ""
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/boxes/{deviceId}/sensors": {
      "get": {
        "tags": [
          "Public · Sensors"
        ],
        "summary": "Get the latest measurements of all sensors of the specified senseBox.",
        "parameters": [
          {
            "in": "path",
            "name": "deviceId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "the ID of the senseBox you are referring to"
          },
          {
            "in": "query",
            "name": "count",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            },
            "description": "Number of measurements to be retrieved for every sensor"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": null
          }
        }
      }
    },
    "/api/boxes": {
      "post": {
        "tags": [
          "Public · Boxes"
        ],
        "summary": "Create a new box",
        "description": "Creates a new box/device with sensors",
        "operationId": "createBox",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "location"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Box name",
                    "example": "trala"
                  },
                  "exposure": {
                    "type": "string",
                    "enum": [
                      "indoor",
                      "outdoor",
                      "mobile",
                      "unknown"
                    ],
                    "description": "Box exposure type",
                    "example": "mobile"
                  },
                  "location": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "description": "Box location as [longitude, latitude]",
                    "example": [
                      -122.406417,
                      37.785834
                    ]
                  },
                  "grouptag": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Box group tags",
                    "example": [
                      "bike",
                      "atrai",
                      "arnsberg"
                    ]
                  },
                  "model": {
                    "type": "string",
                    "enum": [
                      "homeV2Lora",
                      "homeV2Ethernet",
                      "homeV2Wifi",
                      "senseBox:Edu",
                      "luftdaten.info",
                      "Custom"
                    ],
                    "description": "Box model type",
                    "example": "Custom"
                  },
                  "sensors": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "id",
                        "title",
                        "sensorType",
                        "unit"
                      ],
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "Sensor ID",
                          "example": "0"
                        },
                        "icon": {
                          "type": "string",
                          "description": "Sensor icon",
                          "example": "osem-thermometer"
                        },
                        "title": {
                          "type": "string",
                          "description": "Sensor title",
                          "example": "Temperature"
                        },
                        "sensorType": {
                          "type": "string",
                          "description": "Sensor type",
                          "example": "HDC1080"
                        },
                        "unit": {
                          "type": "string",
                          "description": "Sensor unit",
                          "example": "°C"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Box created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Box"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Bad Request"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid request data"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Forbidden"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid JWT authorization. Please sign in to obtain new JWT."
                    }
                  }
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed - only POST is supported",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Method Not Allowed"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Internal Server Error"
                    },
                    "message": {
                      "type": "string",
                      "example": "The server was unable to create the box. Please try again later."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/device/{deviceId}": {
      "get": {
        "summary": "Get device by ID",
        "description": "Retrieve a single device by their unique identifier",
        "tags": [
          "Public · Device"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Unique identifier of the user",
            "schema": {
              "type": "string",
              "example": "12345"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Device retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "12345"
                    },
                    "name": {
                      "type": "string",
                      "example": "John Doe"
                    },
                    "email": {
                      "type": "string",
                      "example": "john.doe@example.com"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2023-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Device ID is required",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Device ID is required."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Device not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Device not found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/devices": {
      "get": {
        "tags": [
          "Public · Devices"
        ],
        "summary": "Get devices with filtering options",
        "description": "Retrieves devices based on various filter criteria. Supports both JSON and GeoJSON formats.",
        "parameters": [
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "json",
                "geojson"
              ],
              "default": "json"
            },
            "description": "Response format"
          },
          {
            "name": "minimal",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                true,
                false
              ],
              "default": false
            },
            "description": "Return minimal device information"
          },
          {
            "name": "full",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                true,
                false
              ],
              "default": false
            },
            "description": "Return full device information"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 20,
              "default": 5
            },
            "description": "Maximum number of devices to return"
          },
          {
            "name": "name",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Filter devices by name"
          },
          {
            "name": "phenomenon",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Filter devices by phenomenon type"
          },
          {
            "name": "fromDate",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter devices from this date",
            "example": "2023-05-15T10:00:00Z"
          },
          {
            "name": "toDate",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter devices to this date",
            "example": "2023-05-15T12:00:00Z"
          },
          {
            "name": "grouptag",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Filter devices by group tag"
          },
          {
            "name": "exposure",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Filter devices by exposure type"
          },
          {
            "name": "near",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^-?\\d+\\.?\\d*,-?\\d+\\.?\\d*$"
            },
            "description": "Find devices near coordinates (lat,lng)",
            "example": "52.5200,13.4050"
          },
          {
            "name": "maxDistance",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 1000
            },
            "description": "Maximum distance in meters when using 'near' parameter"
          },
          {
            "name": "bbox",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^-?\\d+\\.?\\d*,-?\\d+\\.?\\d*,-?\\d+\\.?\\d*,-?\\d+\\.?\\d*$"
            },
            "description": "Bounding box coordinates (swLng,swLat,neLng,neLat)",
            "example": "13.2,52.4,13.6,52.6"
          },
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Specific date filter (TODO - not implemented)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved devices",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Device"
                      }
                    },
                    {
                      "$ref": "#/components/schemas/GeoJSONFeatureCollection"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "invalidFormat": {
                    "summary": "Invalid format parameter",
                    "value": {
                      "error": "Failed to fetch devices"
                    }
                  },
                  "invalidLimit": {
                    "summary": "Invalid limit parameter",
                    "value": {
                      "error": "Limit must be at least 1"
                    }
                  },
                  "exceedsLimit": {
                    "summary": "Limit exceeds maximum",
                    "value": {
                      "error": "Limit should not exceed 20"
                    }
                  },
                  "invalidNear": {
                    "summary": "Invalid near parameter",
                    "value": {
                      "error": "Invalid 'near' parameter format. Expected: 'lat,lng'"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": "Failed to fetch devices"
                }
              }
            }
          }
        }
      }
    },
    "/api/getsensors": {
      "get": {
        "tags": [
          "Public · Sensors"
        ],
        "summary": "Get sensors by device ID",
        "description": "Returns a list of sensors associated with the specified device ID",
        "parameters": [
          {
            "in": "query",
            "name": "deviceId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the device to fetch sensors for",
            "example": "device-123"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Sensor"
                  }
                },
                "example": [
                  {
                    "id": "sensor-1",
                    "name": "Temperature Sensor",
                    "type": "temperature"
                  },
                  {
                    "id": "sensor-2",
                    "name": "Humidity Sensor",
                    "type": "humidity"
                  }
                ]
              }
            }
          },
          "400": {
            "description": "Bad request - deviceId parameter is missing",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                },
                "example": {
                  "error": "deviceId is required"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                },
                "example": {
                  "error": "Failed to fetch sensors"
                }
              }
            }
          }
        }
      }
    },
    "/api/measurements": {
      "post": {
        "tags": [
          "Public · Measurements"
        ],
        "summary": "Create new measurements",
        "description": "Accepts an array of measurement data and stores it in the database",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Measurement"
                },
                "example": [
                  {
                    "sensorId": "sensor-123",
                    "time": "2023-05-15T10:00:00Z",
                    "value": 25.4
                  },
                  {
                    "sensorId": "sensor-456",
                    "time": "2023-05-15T10:01:00Z",
                    "value": 22.1
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Measurements successfully stored",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Measurements successfully stored"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid data format",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid data format"
                    }
                  }
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Method not allowed"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/users/me": {
      "get": {
        "tags": [
          "Public · User Management"
        ],
        "summary": "Get current user profile",
        "description": "Retrieves the authenticated user's profile information",
        "operationId": "getCurrentUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved user profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Ok"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "me": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Forbidden"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid JWT authorization. Please sign in to obtain new JWT."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Internal Server Error"
                    },
                    "message": {
                      "type": "string",
                      "example": "The server was unable to complete your request. Please try again later."
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Public · User Management"
        ],
        "summary": "Update user profile",
        "description": "Updates the authenticated user's profile information",
        "operationId": "updateUserProfile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "New email address",
                    "example": "newemail@example.com"
                  },
                  "language": {
                    "type": "string",
                    "description": "Preferred language setting",
                    "example": "en"
                  },
                  "name": {
                    "type": "string",
                    "description": "User's display name",
                    "example": "John Doe"
                  },
                  "currentPassword": {
                    "type": "string",
                    "format": "password",
                    "description": "Current password (required for password change)",
                    "example": "currentPassword123"
                  },
                  "newPassword": {
                    "type": "string",
                    "format": "password",
                    "description": "New password",
                    "example": "newPassword456"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User profile updated successfully or no changes made",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "type": "object",
                      "description": "Profile updated successfully",
                      "properties": {
                        "code": {
                          "type": "string",
                          "example": "Ok"
                        },
                        "message": {
                          "type": "string",
                          "example": "User successfully saved. Password updated."
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "me": {
                              "$ref": "#/components/schemas/User"
                            }
                          }
                        }
                      }
                    },
                    {
                      "type": "object",
                      "description": "No changes made",
                      "properties": {
                        "code": {
                          "type": "string",
                          "example": "Ok"
                        },
                        "message": {
                          "type": "string",
                          "example": "No changed properties supplied. User remains unchanged."
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - validation errors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Bad Request"
                    },
                    "message": {
                      "type": "string",
                      "example": "Current password is incorrect"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForbiddenError"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalServerError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Public · User Management"
        ],
        "summary": "Delete user account",
        "description": "Permanently deletes the authenticated user's account",
        "operationId": "deleteUserAccount",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "type": "object",
                "required": [
                  "password"
                ],
                "properties": {
                  "password": {
                    "type": "string",
                    "format": "password",
                    "description": "Current password for account deletion confirmation",
                    "example": "myCurrentPassword123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account successfully deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "null",
                  "description": "Empty response indicating successful deletion"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing password",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Bad Request"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - incorrect password",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Password incorrect"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForbiddenError"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Internal Server Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/refresh-auth": {
      "post": {
        "tags": [
          "Public · Authentication"
        ],
        "summary": "Refresh authentication token",
        "description": "Refreshes a JWT access token using a valid refresh token",
        "operationId": "refreshAuth",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token"
                ],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "Valid refresh token",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                }
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "type": "object",
                "required": [
                  "token"
                ],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "Valid refresh token",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully refreshed authentication",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Authorized"
                    },
                    "message": {
                      "type": "string",
                      "example": "Successfully refreshed auth"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    },
                    "token": {
                      "type": "string",
                      "description": "New JWT access token",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "refreshToken": {
                      "type": "string",
                      "description": "New JWT refresh token",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Authentication failed - invalid or expired refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Forbidden"
                    },
                    "message": {
                      "type": "string",
                      "enum": [
                        "You must specify a token to refresh",
                        "Refresh token invalid or too old. Please sign in with your username and password."
                      ]
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Internal Server Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/register": {
      "post": {
        "tags": [
          "Public · Authentication"
        ],
        "summary": "Register a new user",
        "description": "Creates a new user account with username, email, password, and language preference",
        "operationId": "registerUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "email",
                  "password"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Username for the new account",
                    "minLength": 3,
                    "maxLength": 40,
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9._\\- ]*$",
                    "example": "john_doe"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email address for the new account",
                    "example": "john.doe@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "description": "Password for the new account",
                    "minLength": 8,
                    "example": "mySecurePassword123"
                  },
                  "language": {
                    "type": "string",
                    "description": "Preferred language for the user",
                    "enum": [
                      "de_DE",
                      "en_US"
                    ],
                    "default": "en_US",
                    "example": "en_US"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User successfully registered",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Successfully registered new user"
                    },
                    "token": {
                      "type": "string",
                      "description": "JWT access token",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "refreshToken": {
                      "type": "string",
                      "description": "JWT refresh token",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                },
                "example": {
                  "message": "Successfully registered new user",
                  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "data": {
                    "id": "user_123456",
                    "username": "john_doe",
                    "email": "john.doe@example.com",
                    "language": "en_US"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - validation error or user already exists",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                },
                "examples": {
                  "userExists": {
                    "summary": "User already exists",
                    "value": {
                      "message": "User already exists."
                    }
                  },
                  "usernameRequired": {
                    "summary": "Username validation failed",
                    "value": {
                      "message": "Username is required."
                    }
                  },
                  "emailInvalid": {
                    "summary": "Email validation failed",
                    "value": {
                      "message": "Invalid email format."
                    }
                  },
                  "passwordTooShort": {
                    "summary": "Password validation failed",
                    "value": {
                      "message": "Password must be at least 8 characters long."
                    }
                  }
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed - only POST requests are accepted",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                },
                "example": {
                  "message": "Unable to create jwt for newly created user: Token generation failed"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                },
                "example": "Internal Server Error"
              }
            }
          }
        }
      }
    },
    "/api/users/sign-in": {
      "post": {
        "tags": [
          "Public · Authentication"
        ],
        "summary": "User sign-in",
        "description": "Authenticates a user with email and password credentials",
        "operationId": "signInUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "User's email address",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "description": "User's password",
                    "minLength": 8,
                    "example": "mySecurePassword123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Authorized"
                    },
                    "message": {
                      "type": "string",
                      "example": "Successfully signed in"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    },
                    "token": {
                      "type": "string",
                      "description": "JWT access token",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "refreshToken": {
                      "type": "string",
                      "description": "JWT refresh token",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Authentication failed - invalid credentials or missing fields",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "Forbidden"
                    },
                    "message": {
                      "type": "string",
                      "enum": [
                        "You must specify either your email or your username",
                        "You must specify your password to sign in",
                        "User and or password not valid!"
                      ]
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Internal Server Error"
                }
              }
            }
          }
        }
      }
    },
    "/integrations/{deviceId}": {
      "get": {
        "summary": "Get integration configuration for a device",
        "operationId": "getIntegration",
        "tags": [
          "Integration · Integration Management"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/DeviceId"
          }
        ],
        "responses": {
          "200": {
            "description": "Integration configuration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IntegrationConfig"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      },
      "put": {
        "summary": "Create or update integration configuration",
        "operationId": "createOrUpdateIntegration",
        "tags": [
          "Integration · Integration Management"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/DeviceId"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Configuration specific to your integration type",
                "additionalProperties": true
              },
              "examples": {
                "mqtt": {
                  "summary": "MQTT Integration",
                  "value": {
                    "url": "mqtt://broker.example.com:1883",
                    "topic": "sensors/temperature",
                    "messageFormat": "json",
                    "connectionOptions": {
                      "username": "user",
                      "password": "pass"
                    }
                  }
                },
                "ttn": {
                  "summary": "TTN Integration",
                  "value": {
                    "devId": "my-device",
                    "appId": "my-app",
                    "profile": "cayenne-lpp"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Integration updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IntegrationConfig"
                }
              }
            }
          },
          "201": {
            "description": "Integration created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IntegrationConfig"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      },
      "delete": {
        "summary": "Delete integration configuration",
        "operationId": "deleteIntegration",
        "tags": [
          "Integration · Integration Management"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/DeviceId"
          }
        ],
        "responses": {
          "204": {
            "description": "Integration deleted successfully"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/integrations/schema/{integrationName}": {
      "get": {
        "summary": "Get JSON Schema for integration configuration form",
        "operationId": "getIntegrationSchema",
        "tags": [
          "Integration · Schema"
        ],
        "parameters": [
          {
            "name": "integrationName",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "mqtt"
          }
        ],
        "responses": {
          "200": {
            "description": "JSON Schema for dynamic form generation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JsonSchema"
                },
                "examples": {
                  "mqtt": {
                    "summary": "MQTT Schema Example",
                    "value": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "url",
                          "topic",
                          "messageFormat"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "title": "Broker URL",
                            "pattern": "^(mqtt|mqtts|ws|wss)://.+"
                          },
                          "topic": {
                            "type": "string",
                            "title": "Topic"
                          },
                          "messageFormat": {
                            "type": "string",
                            "title": "Message Format",
                            "enum": [
                              "json",
                              "csv"
                            ]
                          }
                        }
                      },
                      "uiSchema": {
                        "ui:order": [
                          "url",
                          "topic",
                          "messageFormat"
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health check endpoint",
        "operationId": "healthCheck",
        "tags": [
          "Integration · Health"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "healthy"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Integration · Integration Management",
      "description": "CRUD operations for integration configurations"
    },
    {
      "name": "Integration · Schema",
      "description": "JSON Schema for dynamic form generation"
    },
    {
      "name": "Integration · Health",
      "description": "Service health check"
    }
  ],
  "security": [
    {
      "ServiceKey": []
    }
  ],
  "x-tagGroups": [
    {
      "name": "Public API",
      "tags": []
    },
    {
      "name": "Integration API",
      "tags": [
        "Integration · Integration Management",
        "Integration · Schema",
        "Integration · Health"
      ]
    }
  ]
}